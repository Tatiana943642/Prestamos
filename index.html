<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juegos de Préstamos</title>
    <!-- Favicon (se usará el mismo logo) -->
    <link rel="icon" type="image/png" href="escudo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            500: '#1b5e20',
                            600: '#2e7d32',
                            700: '#388e3c',
                            800: '#1b5e20',
                        },
                        secondary: {
                            500: '#1b5e20',
                            600: '#2e7d32',
                            700: '#388e3c',
                            800: '#1b5e20',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        @keyframes blob {
            0%, 100% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
        .page { display: none; }
        .active-page { display: block; }
        
        /* Estilo para el logo de la universidad */
        .logo-usb {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            text-align: center;
            background: linear-gradient(135deg, #1b5e20 0%, #388e3c 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .logo-usb-small {
            width: 40px;
            height: 40px;
            font-size: 10px;
            padding: 4px;
            line-height: 1.1;
        }
        
        .logo-usb-large {
            width: 120px;
            height: 120px;
            font-size: 16px;
            padding: 12px;
            line-height: 1.2;
        }
        
        /* Estilo para el logo de imagen */
        .logo-image {
            max-width: 180px;
            height: auto;
            margin: 0 auto;
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header (inicialmente oculto hasta iniciar sesión) -->
    <header id="mainHeader" class="bg-primary-800 text-white shadow-lg hidden">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <a href="#" class="flex items-center gap-2 text-xl font-bold" onclick="showPage('home')">
                    <span>Préstamos Unisimón</span>
                </a>
                
                <nav class="hidden md:flex space-x-1">
                    <a href="#" id="nav-home" onclick="showPage('home')" class="nav-item flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium bg-primary-700 text-white">
                        <i class="fas fa-home"></i>
                        Inicio
                    </a>
                    <a href="#" onclick="logout()" class="flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-red-700 hover:text-white">
                        <i class="fas fa-sign-out-alt"></i>
                        Cerrar Sesión
                    </a>
                </nav>
                
                <div class="md:hidden">
                    <button class="p-2 rounded-md text-gray-300 hover:bg-primary-700 hover:text-white focus:outline-none" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu (hidden by default) -->
    <div id="mobileMenu" class="md:hidden bg-primary-800 text-white hidden">
        <div class="container mx-auto px-4 py-2">
            <a href="#" onclick="showPage('home')" class="block py-2 px-4 hover:bg-primary-700 rounded">Inicio</a>
            <a href="#" onclick="logout()" class="block py-2 px-4 hover:bg-red-700 rounded">Cerrar Sesión</a>
        </div>
    </div>

    <!-- Home Page (solo visible después de iniciar sesión) -->
    <section id="home" class="page relative min-h-screen bg-gray-100 overflow-hidden">
        <div class="absolute top-20 left-20 w-40 h-40 bg-green-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"></div>
        <div class="absolute top-40 right-20 w-60 h-60 bg-green-400 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-20 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-green-500 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"></div>
        
        <div class="container mx-auto px-4 py-20 relative z-10">
            <div class="text-center max-w-4xl mx-auto">
                <div class="mb-6">
                    <!-- Logo principal de la Universidad Simón Bolívar como imagen -->
                    <img src="escudo.png" alt="Universidad Simón Bolívar" class="logo-image mb-6">
                </div>
                <h1 class="text-5xl md:text-6xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 bg-clip-text text-transparent mb-6">
                    Juego de Préstamos
                </h1>
                <p class="text-xl text-gray-700 mb-8 leading-relaxed">
                    Sistema de gestión de préstamos de juegos para la comunidad universitaria.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
                    <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                        <div class="text-green-600 mb-4">
                            <i class="fas fa-clipboard-list text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Préstamos</h3>
                        <p class="text-gray-600">Gestiona los préstamos de juegos a estudiantes y personal universitario.</p>
                        <button onclick="showPage('loan')" class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors w-full">
                            Acceder
                        </button>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                        <div class="text-green-600 mb-4">
                            <i class="fas fa-boxes text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Inventario</h3>
                        <p class="text-gray-600">Administra el inventario de juegos disponibles y su estado actual.</p>
                        <button onclick="showPage('inventory')" class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors w-full">
                            Acceder
                        </button>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                        <div class="text-green-600 mb-4">
                            <i class="fas fa-history text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Historial</h3>
                        <p class="text-gray-600">Consulta el historial completo de préstamos y devoluciones.</p>
                        <button onclick="showPage('history')" class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors w-full">
                            Acceder
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Page (siempre visible inicialmente) -->
    <section id="login" class="page relative min-h-screen bg-gray-100 overflow-hidden">
        <div class="absolute top-20 left-20 w-40 h-40 bg-green-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"></div>
        <div class="absolute top-40 right-20 w-60 h-60 bg-green-400 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-20 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-green-500 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"></div>
        
        <div class="container mx-auto px-4 py-20 relative z-10">
            <div class="text-center max-w-4xl mx-auto">
                <div class="mb-6">
                    <!-- Logo principal de la Universidad Simón Bolívar (versión imagen) -->
                    <img src="escudo.png" alt="Universidad Simón Bolívar" class="logo-image mb-6">
                </div>
                <h1 class="text-5xl md:text-6xl font-bold bg-gradient-to-r from-secondary-600 to-secondary-800 bg-clip-text text-transparent mb-6">
                    Juego de Préstamos
                </h1>
                <p class="text-xl text-gray-700 mb-8 leading-relaxed">
                    Sistema de gestión de préstamos de juegos para la comunidad universitaria.
                </p>
                
                <!-- Login Form -->
                <div id="loginForm" class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold text-center mb-6 text-secondary-800">Iniciar Sesión</h2>
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Usuario</label>
                            <input type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary-500" placeholder="Tu usuario" required>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Contraseña</label>
                            <input type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary-500" placeholder="Tu contraseña" required>
                        </div>
                        <button type="submit" class="w-full px-4 py-3 bg-secondary-600 text-white rounded-lg hover:bg-secondary-700 transition-colors">
                            Ingresar
                        </button>
                    </form>
                    <p class="text-center text-gray-500 mt-4 text-sm">
                        Usa tus credenciales institucionales
                    </p>
                </div>
                
                <p class="text-gray-500 mt-12">
                    Sistema oficial de la Universidad Simón Bolívar
                </p>
            </div>
        </div>
    </section>

    <!-- Loan Page -->
    <section id="loan" class="page container mx-auto px-4 py-12">
        <h1 class="text-3xl font-bold text-center mb-8">Préstamos Activos</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-bold mb-4 text-primary-800">Resumen de Préstamos</h2>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-green-100 p-4 rounded-lg text-center">
                        <p class="text-3xl font-bold text-green-800">12</p>
                        <p class="text-green-600">Préstamos activos</p>
                    </div>
                    <div class="bg-yellow-100 p-4 rounded-lg text-center">
                        <p class="text-3xl font-bold text-yellow-800">3</p>
                        <p class="text-yellow-600">Por devolver esta semana</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-bold mb-4 text-primary-800">Acciones Rápidas</h2>
                <div class="space-y-3">
                    <button class="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i> Nuevo Préstamo
                    </button>
                    <button class="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        <i class="fas fa-undo mr-2"></i> Registrar Devolución
                    </button>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full">
                    <thead class="bg-gray-100 text-gray-600 uppercase text-sm">
                        <tr>
                            <th class="py-3 px-4 text-left">Juego</th>
                            <th class="py-3 px-4 text-left">Usuario</th>
                            <th class="py-3 px-4 text-left">Fecha Préstamo</th>
                            <th class="py-3 px-4 text-left">Fecha Devolución</th>
                            <th class="py-3 px-4 text-left">Estado</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-700">
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">Ajedrez</td>
                            <td class="py-3 px-4">Juan Pérez (202310001)</td>
                            <td class="py-3 px-4">15/09/2025</td>
                            <td class="py-3 px-4">22/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">Activo</span></td>
                        </tr>
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">UNO</td>
                            <td class="py-3 px-4">María Gómez (202310045)</td>
                            <td class="py-3 px-4">18/09/2025</td>
                            <td class="py-3 px-4">25/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">Activo</span></td>
                        </tr>
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">Jenga</td>
                            <td class="py-3 px-4">Carlos Rodríguez (202310128)</td>
                            <td class="py-3 px-4">20/09/2025</td>
                            <td class="py-3 px-4">27/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">Activo</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Inventory Page -->
    <section id="inventory" class="page container mx-auto px-4 py-12">
        <h1 class="text-3xl font-bold text-center mb-8">Inventario de Juegos</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-bold mb-4 text-primary-800">Resumen de Inventario</h2>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-green-100 p-4 rounded-lg text-center">
                        <p class="text-3xl font-bold text-green-800">8</p>
                        <p class="text-green-600">Tipos de juegos</p>
                    </div>
                    <div class="bg-green-100 p-4 rounded-lg text-center">
                        <p class="text-3xl font-bold text-green-800">42</p>
                        <p class="text-green-600">Unidades totales</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-bold mb-4 text-primary-800">Acciones de Inventario</h2>
                <div class="space-y-3">
                    <button class="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        <i class="fas fa-plus-circle mr-2"></i> Agregar Juego
                    </button>
                    <button class="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        <i class="fas fa-sync-alt mr-2"></i> Actualizar Juego
                    </button>
                </div>
            </div>
        </div>
        
        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
            <h2 class="text-xl font-bold mb-4 text-primary-800">Estado de Juegos</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-green-100 p-4 rounded-lg text-center">
                    <p class="text-2xl font-bold text-green-800">27</p>
                    <p class="text-green-600">En buen estado</p>
                </div>
                <div class="bg-yellow-100 p-4 rounded-lg text-center">
                    <p class="text-2xl font-bold text-yellow-800">8</p>
                    <p class="text-yellow-600">En reparación</p>
                </div>
                <div class="bg-red-100 p-4 rounded-lg text-center">
                    <p class="text-2xl font-bold text-red-800">4</p>
                    <p class="text-red-600">Dañados</p>
                </div>
                <div class="bg-blue-100 p-4 rounded-lg text-center">
                    <p class="text-2xl font-bold text-blue-800">3</p>
                    <p class="text-blue-600">Extraviados</p>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center gap-2 mb-4">
                    <i class="fas fa-chess-board text-green-600 text-xl"></i>
                    <h3 class="text-xl font-bold text-gray-800">Ajedrez</h3>
                </div>
                <p class="text-gray-600 mb-4">Juego de estrategia para 2 jugadores</p>
                <div class="flex justify-between items-center mb-3">
                    <span class="text-gray-700 font-medium">En stock: <span class="text-green-600">8</span></span>
                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Disponible</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-sm text-gray-500">Estado: <span class="font-medium">Bueno</span></span>
                    <div class="flex gap-2">
                        <button class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs hover:bg-green-200">Editar</button>
                        <button class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs hover:bg-yellow-200">Estado</button>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center gap-2 mb-4">
                    <i class="fas fa-cards text-green-600 text-xl"></i>
                    <h3 class="text-xl font-bold text-gray-800">UNO</h3>
                </div>
                <p class="text-gray-600 mb-4">Juego de cartas para 2-10 jugadores</p>
                <div class="flex justify-between items-center mb-3">
                    <span class="text-gray-700 font-medium">En stock: <span class="text-green-600">12</span></span>
                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Disponible</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-sm text-gray-500">Estado: <span class="font-medium">Excelente</span></span>
                    <div class="flex gap-2">
                        <button class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs hover:bg-green-200">Editar</button>
                        <button class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs hover:bg-yellow-200">Estado</button>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center gap-2 mb-4">
                    <i class="fas fa-puzzle-piece text-green-600 text-xl"></i>
                    <h3 class="text-xl font-bold text-gray-800">Jenga</h3>
                </div>
                <p class="text-gray-600 mb-4">Juego de habilidad física y mental</p>
                <div class="flex justify-between items-center mb-3">
                    <span class="text-gray-700 font-medium">En stock: <span class="text-green-600">6</span></span>
                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">Pocas unidades</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-sm text-gray-500">Estado: <span class="font-medium">Reparación</span></span>
                    <div class="flex gap-2">
                        <button class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs hover:bg-green-200">Editar</button>
                        <button class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs hover:bg-yellow-200">Estado</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- History Page -->
    <section id="history" class="page container mx-auto px-4 py-12">
        <h1 class="text-3xl font-bold text-center mb-8">Historial de Préstamos</h1>
        
        <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
            <div class="p-6 border-b border-gray-200">
                <h2 class="text-xl font-bold text-primary-800 mb-4">Filtros de Búsqueda</h2>
                <div class="flex flex-wrap gap-4">
                    <select id="game-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500">
                        <option value="">Todos los juegos</option>
                        <option value="Ajedrez">Ajedrez</option>
                        <option value="UNO">UNO</option>
                        <option value="Jenga">Jenga</option>
                        <option value="Monopoly">Monopoly</option>
                    </select>
                    <select id="status-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500">
                        <option value="">Todos los estados</option>
                        <option value="Activo">Activo</option>
                        <option value="Completado">Completado</option>
                        <option value="Vencido">Vencido</option>
                    </select>
                    <input type="date" id="date-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500">
                    <button onclick="filterHistory()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Buscar</button>
                    <button onclick="downloadPDF()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                        <i class="fas fa-file-pdf mr-2"></i> Descargar PDF
                    </button>
                </div>
                <div id="filter-result" class="mt-4 text-sm text-gray-600 hidden">
                    <!-- Aquí se mostrarán los resultados del filtro -->
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full">
                    <thead class="bg-gray-100 text-gray-600 uppercase text-sm">
                        <tr>
                            <th class="py-3 px-4 text-left">Juego</th>
                            <th class="py-3 px-4 text-left">Usuario</th>
                            <th class="py-3 px-4 text-left">Fecha Préstamo</th>
                            <th class="py-3 px-4 text-left">Fecha Devolución</th>
                            <th class="py-3 px-4 text-left">Estado</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-700" id="history-table">
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">Ajedrez</td>
                            <td class="py-3 px-4">Ana Martínez (202310087)</td>
                            <td class="py-3 px-4">10/09/2025</td>
                            <td class="py-3 px-4">17/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Completado</span></td>
                        </tr>
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">UNO</td>
                            <td class="py-3 px-4">Pedro López (202310156)</td>
                            <td class="py-3 px-4">12/09/2025</td>
                            <td class="py-3 px-4">19/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Completado</span></td>
                        </tr>
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">Jenga</td>
                            <td class="py-3 px-4">Laura Díaz (202310201)</td>
                            <td class="py-3 px-4">14/09/2025</td>
                            <td class="py-3 px-4">21/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs">Vencido</span></td>
                        </tr>
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">Monopoly</td>
                            <td class="py-3 px-4">Carlos Sánchez (202310045)</td>
                            <td class="py-3 px-4">16/09/2025</td>
                            <td class="py-3 px-4">23/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Completado</span></td>
                        </tr>
                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                            <td class="py-3 px-4">Scrabble</td>
                            <td class="py-3 px-4">Miguel Rodríguez (202310112)</td>
                            <td class="py-3 px-4">18/09/2025</td>
                            <td class="py-3 px-4">25/09/2025</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Completado</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4 text-center">
            <p>2025 Juego de Préstamos Universidad Simón Bolívar. Todos los derechos reservados.</p>
            <p class="mt-2">Contacto: <a href="mailto:j_perez53@unisimon.edu.co" class="underline hover:text-green-300">j_perez53@unisimon.edu.co</a></p>
        </div>
    </footer>

    <script>
        // Datos de ejemplo para el historial
        const loanHistory = [
            { game: "Ajedrez", user: "Ana Martínez (202310087)", loanDate: "10/09/2025", returnDate: "17/09/2025", status: "Completado" },
            { game: "UNO", user: "Pedro López (202310156)", loanDate: "12/09/2025", returnDate: "19/09/2025", status: "Completado" },
            { game: "Jenga", user: "Laura Díaz (202310201)", loanDate: "14/09/2025", returnDate: "21/09/2025", status: "Vencido" },
            { game: "Monopoly", user: "Carlos Sánchez (202310045)", loanDate: "16/09/2025", returnDate: "23/09/2025", status: "Completado" },
            { game: "Scrabble", user: "Miguel Rodríguez (202310112)", loanDate: "18/09/2025", returnDate: "25/09/2025", status: "Completado" }
        ];

        // Estado de la sesión
        let loggedIn = false;
        let currentPage = 'login';

        // Guardar estado en localStorage
        function saveState() {
            localStorage.setItem('loggedIn', loggedIn);
            localStorage.setItem('currentPage', currentPage);
        }

        // Cargar estado desde localStorage
        function loadState() {
            const savedLoggedIn = localStorage.getItem('loggedIn');
            const savedCurrentPage = localStorage.getItem('currentPage');
            
            if (savedLoggedIn !== null) {
                loggedIn = savedLoggedIn === 'true';
            }
            
            if (savedCurrentPage !== null) {
                currentPage = savedCurrentPage;
            }
        }

        // Funciones para navegación
        function showPage(pageId) {
            if (!loggedIn && pageId !== 'login') {
                // Si no ha iniciado sesión, solo permite ver la página de login
                return;
            }
            
            // Ocultar todas las páginas
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active-page');
            });
            
            // Mostrar la página seleccionada
            document.getElementById(pageId).classList.add('active-page');
            
            // Actualizar navegación activa
            currentPage = pageId;
            updateNavigation();
            
            // Guardar estado
            saveState();
            
            // Cerrar menú móvil si está abierto
            document.getElementById('mobileMenu').classList.add('hidden');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function updateNavigation() {
            // Actualizar el elemento activo en la navegación
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('bg-primary-700', 'text-white');
                item.classList.add('text-gray-300', 'hover:bg-primary-700', 'hover:text-white');
            });
            
            // Si estamos en una página que no es el inicio, no resaltar nada
            if (currentPage !== 'home') {
                document.getElementById('nav-home').classList.remove('bg-primary-700', 'text-white');
                document.getElementById('nav-home').classList.add('text-gray-300', 'hover:bg-primary-700', 'hover:text-white');
            } else {
                document.getElementById('nav-home').classList.add('bg-primary-700', 'text-white');
                document.getElementById('nav-home').classList.remove('text-gray-300', 'hover:bg-primary-700', 'hover:text-white');
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Función para iniciar sesión
        function login() {
            loggedIn = true;
            document.getElementById('mainHeader').classList.remove('hidden');
            saveState();
            showPage('home');
        }

        // Función para cerrar sesión
        function logout() {
            loggedIn = false;
            document.getElementById('mainHeader').classList.add('hidden');
            saveState();
            showPage('login');
        }

        // Función para filtrar el historial
        function filterHistory() {
            const gameFilter = document.getElementById('game-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            const dateFilter = document.getElementById('date-filter').value;
            const resultDiv = document.getElementById('filter-result');
            
            // Convertir fecha al formato DD/MM/YYYY
            const formattedDateFilter = dateFilter ? new Date(dateFilter).toLocaleDateString('es-ES') : '';
            
            // Filtrar los datos
            const filteredData = loanHistory.filter(item => {
                const matchesGame = !gameFilter || item.game === gameFilter;
                const matchesStatus = !statusFilter || item.status === statusFilter;
                const matchesDate = !formattedDateFilter || item.loanDate === formattedDateFilter;
                
                return matchesGame && matchesStatus && matchesDate;
            });
            
            // Mostrar resultados en la tabla
            const tableBody = document.getElementById('history-table');
            tableBody.innerHTML = '';
            
            if (filteredData.length === 0) {
                resultDiv.classList.remove('hidden');
                resultDiv.innerHTML = '<div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4"><p>No se encuentra información para los filtros aplicados.</p></div>';
            } else {
                resultDiv.classList.add('hidden');
                
                filteredData.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-200 hover:bg-gray-50';
                    
                    let statusClass = 'bg-green-100 text-green-800';
                    if (item.status === 'Vencido') {
                        statusClass = 'bg-red-100 text-red-800';
                    } else if (item.status === 'Activo') {
                        statusClass = 'bg-yellow-100 text-yellow-800';
                    }
                    
                    row.innerHTML = `
                        <td class="py-3 px-4">${item.game}</td>
                        <td class="py-3 px-4">${item.user}</td>
                        <td class="py-3 px-4">${item.loanDate}</td>
                        <td class="py-3 px-4">${item.returnDate}</td>
                        <td class="py-3 px-4"><span class="px-2 py-1 ${statusClass} rounded-full text-xs">${item.status}</span></td>
                    `;
                    
                    tableBody.appendChild(row);
                });
            }
        }

        // Función para descargar PDF
        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Título
            doc.setFontSize(20);
            doc.setTextColor(40, 100, 40);
            doc.text('Reporte de Historial de Préstamos', 105, 15, { align: 'center' });
            
            // Fecha de generación
            doc.setFontSize(12);
            doc.setTextColor(100, 100, 100);
            doc.text(`Generado el: ${new Date().toLocaleDateString()}`, 105, 22, { align: 'center' });
            
            // Obtener datos filtrados o todos los datos
            const gameFilter = document.getElementById('game-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            const dateFilter = document.getElementById('date-filter').value;
            const formattedDateFilter = dateFilter ? new Date(dateFilter).toLocaleDateString('es-ES') : '';
            
            const filteredData = loanHistory.filter(item => {
                const matchesGame = !gameFilter || item.game === gameFilter;
                const matchesStatus = !statusFilter || item.status === statusFilter;
                const matchesDate = !formattedDateFilter || item.loanDate === formattedDateFilter;
                
                return matchesGame && matchesStatus && matchesDate;
            });
            
            // Preparar datos para la tabla
            const tableData = filteredData.map(item => [
                item.game,
                item.user,
                item.loanDate,
                item.returnDate,
                item.status
            ]);
            
            // Crear tabla
            doc.autoTable({
                head: [['Juego', 'Usuario', 'Fecha Préstamo', 'Fecha Devolución', 'Estado']],
                body: tableData,
                startY: 30,
                theme: 'grid',
                headStyles: {
                    fillColor: [27, 94, 32],
                    textColor: 255
                },
                alternateRowStyles: {
                    fillColor: [240, 245, 240]
                }
            });
            
            // Guardar PDF
            doc.save('reporte_prestamos.pdf');
        }

        // Manejar envío del formulario de login
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            login();
        });

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar estado guardado
            loadState();
            
            // Mostrar la página según el estado
            if (loggedIn) {
                document.getElementById('mainHeader').classList.remove('hidden');
                showPage(currentPage);
            } else {
                showPage('login');
            }
        });
    </script>
</body>
</html>
